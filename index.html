<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>chat</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <header>
      <div id="user-info">Bağlanılıyor...</div>
    </header>

    <section id="auth">
      <h2 id="auth-title">Giriş Yap</h2>
      <form id="auth-form" autocomplete="off">
        <label>
          <input id="username" type="text" maxlength="30" required placeholder="isim" />
        </label>
        <label>
          <input id="password" type="password" minlength="4" maxlength="100" required placeholder="şifre" />
        </label>

        <div style="display:flex;align-items:center;gap:8px;margin-top:8px;">
          <div id="captcha" style="font-weight:700;background:transparent;padding:8px;border-radius:6px;">?</div>
          <input id="captcha-input" placeholder="cevap" maxlength="2" style="padding:8px;border-radius:6px;border:1px solid #ccc;" />
          <button type="button" id="captcha-refresh">Yenile</button>
        </div>

        <div style="margin-top:12px;display:flex;gap:8px;">
          <button id="auth-submit" type="submit">giriş yap</button>
          <button type="button" id="auth-toggle">Hesap Oluştur</button>
        </div>

        <div id="auth-msg" style="color:#b91c1c;margin-top:8px"></div>
      </form>
    </section>

    <main id="chat" hidden>
      <div id="messages" style="height:50vh;overflow:auto;border:1px solid #eee;padding:10px;border-radius:6px;background:transparent"></div>

      <form id="msg-form" style="margin-top:10px;display:flex;gap:8px;">
        <input id="msg-input" placeholder="Mesaj yaz..." maxlength="1000" style="flex:1;padding:10px;border-radius:6px;border:1px solid #ccc" />
        <button id="send" type="submit">Gönder</button>
      </form>

      <div style="margin-top:8px;display:flex;gap:8px;">
        <button id="logout">Çıkış Yap</button>
      </div>
    </main>

    <!-- admin panel -->
    <div id="admin" hidden style="position:fixed;right:16px;bottom:16px;width:320px;border:1px solid #ddd;background:transparent;padding:8px;border-radius:8px;box-shadow:0 6px 20px rgba(0,0,0,0.08);">
      <div id="admin-handle" style="cursor:grab;font-weight:700;margin-bottom:6px;">Admin Kontrol <button id="admin-close" style="float:right">Kapat</button></div>
      <div style="max-height:40vh;overflow:auto">
        <h4>Mesajlar</h4>
        <div id="admin-messages" style="display:flex;flex-direction:column;gap:6px"></div>
        <button id="admin-clear" style="margin-top:8px;background:#ffdddd;border:1px solid #f88">Tümünü Sil</button>

        <h4 style="margin-top:12px">Kullanıcılar</h4>
        <div id="admin-users" style="display:flex;flex-direction:column;gap:6px"></div>

        <div style="margin-top:8px;display:flex;gap:6px;">
          <input id="ban-name" placeholder="kullanıcı" style="flex:1;padding:6px;border:1px solid #ccc;border-radius:6px" />
          <button id="ban-btn" style="background:#ffdddd">Yasakla</button>
          <button id="unban-btn">Kaldır</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./script.js"></script>
  <script src="admin.js"></script>
  <script src="main.js"></script>
</body>
</html>